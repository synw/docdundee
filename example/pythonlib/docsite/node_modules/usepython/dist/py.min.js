var $py=function(e){"use strict";function n(e,n,t,l){return new(t||(t=Promise))((function(g,o){function I(e){try{s(l.next(e))}catch(e){o(e)}}function i(e){try{s(l.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?g(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(I,i)}s((l=l.apply(e,n||[])).next())}))}var t=null;try{var l="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads");t=l.Worker}catch(e){}function g(e,n,l){var g=void 0===n?null:n,o=function(e,n){return Buffer.from(e,"base64").toString(n?"utf16":"utf8")}(e,void 0!==l&&l),I=o.indexOf("\n",10)+1,i=o.substring(I)+(g?"//# sourceMappingURL="+g:"");return function(e){return new t(i,Object.assign({},e,{eval:!0}))}}function o(e,n,t){var l=void 0===n?null:n,g=function(e,n){var t=atob(e);if(n){for(var l=new Uint8Array(t.length),g=0,o=t.length;g<o;++g)l[g]=t.charCodeAt(g);return String.fromCharCode.apply(null,new Uint16Array(l.buffer))}return t}(e,void 0!==t&&t),o=g.indexOf("\n",10)+1,I=g.substring(o)+(l?"//# sourceMappingURL="+l:""),i=new Blob([I],{type:"application/javascript"});return URL.createObjectURL(i)}var I="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var i,s,c,r=(i="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgaW1wb3J0U2NyaXB0cygiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L3B5b2RpZGUvdjAuMjEuMC9mdWxsL3B5b2RpZGUuanMiKTsKCiAgbGV0IGlzUHlMb2FkZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gc3Rkb3V0KG1zZykgewogICAgc2VsZi5wb3N0TWVzc2FnZSh7IHR5cGU6ICJzdGRvdXQiLCBtc2c6IG1zZywgaWQ6IG51bGwgfSk7CiAgfQoKICBmdW5jdGlvbiBzdGRlcnIobXNnKSB7CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsgdHlwZTogInN0ZGVyciIsIG1zZzogbXNnLCBpZDogbnVsbCB9KTsKICB9CgogIGZ1bmN0aW9uIGluc3RhbGxMb2coaWQsIHN0YWdlLCBtc2cpIHsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICB0eXBlOiAiaW5zdGFsbGxvZyIsIG1zZzogewogICAgICAgIHN0YWdlOiBzdGFnZSwKICAgICAgICBtc2c6IG1zZwogICAgICB9LCBpZDogaWQKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZXJyKGlkLCBtc2cpIHsKICAgIHNlbGYucG9zdE1lc3NhZ2UoeyB0eXBlOiAiZXJyIiwgbXNnOiBtc2csIGlkOiBpZCB9KTsKICB9CgogIGZ1bmN0aW9uIGVuZChpZCwgcmVzKSB7CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsgdHlwZTogImVuZCIsIHJlczogcmVzID8/IG51bGwsIGlkOiBpZCB9KTsKICB9CgogIGFzeW5jIGZ1bmN0aW9uIGxvYWRQeW9kaWRlQW5kUGFja2FnZXMoaWQsIHB5b1BhY2thZ2VzLCBwYWNrYWdlcywgaW5pdENvZGUsIHRyYW5zZm9ybUNvZGUpIHsKICAgIGluc3RhbGxMb2coaWQsIDEsICJMb2FkaW5nIHB5dGhvbiBydW50aW1lIik7CiAgICBzZWxmLnB5b2RpZGUgPSBhd2FpdCBsb2FkUHlvZGlkZSh7CiAgICAgIHN0ZG91dDogc3Rkb3V0LAogICAgICBzdGRlcnI6IHN0ZGVyciwKICAgIH0pOwogICAgcHlvUGFja2FnZXMudW5zaGlmdCgibWljcm9waXAiKTsKICAgIC8vaW5zdGFsbG9nKDIsIGBJbnN0YWxsaW5nIHB5dGhvbiBwYWNrYWdlcyAke3BhY2thZ2VzLmpvaW4oIiwgIil9YCk7CiAgICBpbnN0YWxsTG9nKGlkLCAyLCBgQ3JlYXRpbmcgcHl0aG9uIGVudmApOwogICAgYXdhaXQgc2VsZi5weW9kaWRlLmxvYWRQYWNrYWdlKHB5b1BhY2thZ2VzKTsKICAgIGluc3RhbGxMb2coaWQsIDMsIGBJbnN0YWxsaW5nIHB5dGhvbiBwYWNrYWdlc2ApOwogICAgc2VsZi5wYXJyYXkgPSBwYWNrYWdlczsKICAgIGF3YWl0IHB5b2RpZGUucnVuUHl0aG9uQXN5bmMoYAogIGltcG9ydCBtaWNyb3BpcAogIGZyb20ganMgaW1wb3J0IHBhcnJheQogIGF3YWl0IG1pY3JvcGlwLmluc3RhbGwocGFycmF5LnRvX3B5KCkpCiAgYCk7CiAgICBpbnN0YWxsTG9nKGlkLCA0LCBgSW5pdGlhbGl6aW5nIGVudmlyb25tZW50YCk7CiAgICBzZWxmLnBhcnJheSA9IHVuZGVmaW5lZDsKICAgIGNvbnN0IHNyYyA9IGBmcm9tIHB5b2RpZGUuY29kZSBpbXBvcnQgZXZhbF9jb2RlX2FzeW5jCmZyb20gcHlvZGlkZS5mZmkgaW1wb3J0IHRvX2pzCmFzeW5jIGRlZiBweWV2YWwoY29kZSwgbnMpOgogIHJlc3VsdCA9IGF3YWl0IGV2YWxfY29kZV9hc3luYyhjb2RlLCBucykKICAke3RyYW5zZm9ybUNvZGV9CiAgcmV0dXJuIHRvX2pzKHJlc3VsdClgOwogICAgLy9jb25zb2xlLmxvZygiU1JDIEVYRUMiLCBzcmMpCiAgICBhd2FpdCBweW9kaWRlLnJ1blB5dGhvbkFzeW5jKHNyYyk7CiAgICBpZiAoaW5pdENvZGUubGVuZ3RoID4gMCkgewogICAgICBhd2FpdCBweW9kaWRlLnJ1blB5dGhvbkFzeW5jKGluaXRDb2RlKTsKICAgIH0KICAgIGluc3RhbGxMb2coaWQsIDUsICJUaGUgcHl0aG9uIGVudiBpcyBsb2FkZWQiKTsKICAgIGlzUHlMb2FkZWQgPSB0cnVlOwogIH0KCiAgYXN5bmMgZnVuY3Rpb24gcnVuU2NyaXB0KHB5dGhvbiwgaWQpIHsKICAgIHRyeSB7CiAgICAgIC8vY29uc29sZS5sb2coIkxvYWQgaW1wb3J0cyIpCiAgICAgIGF3YWl0IHNlbGYucHlvZGlkZS5sb2FkUGFja2FnZXNGcm9tSW1wb3J0cyhweXRob24pOwogICAgICAvL2NvbnNvbGUubG9nKCJSdW4gcHkgYXN5bmMiKQogICAgICAvL2xldCByZXN1bHRzID0gYXdhaXQgc2VsZi5weW9kaWRlLnJ1blB5dGhvbkFzeW5jKHB5dGhvbik7CiAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgcHlvZGlkZS5nbG9iYWxzLmdldCgicHlldmFsIikocHl0aG9uLCBweW9kaWRlLmdsb2JhbHMpOwogICAgICAvL2NvbnNvbGUubG9nKCJFbmQiKQogICAgICBlbmQoaWQsIHJlc3VsdHMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coIlBZIFJVTiBFUlIiLCBlcnJvcik7CiAgICAgIGVycihpZCwgZXJyb3IubWVzc2FnZSk7CiAgICB9CiAgfQoKICBzZWxmLm9ubWVzc2FnZSA9IGFzeW5jIChldmVudCkgPT4gewogICAgY29uc3QgeyBpZCwgcHl0aG9uLCAuLi5jb250ZXh0IH0gPSBldmVudC5kYXRhOwogICAgaWYgKGlkICE9ICJfcHlpbnN0YWxsZXIiKSB7CiAgICAgIC8vIFRoZSB3b3JrZXIgY29waWVzIHRoZSBjb250ZXh0IGluIGl0cyBvd24gIm1lbW9yeSIgKGFuIG9iamVjdCBtYXBwaW5nIG5hbWUgdG8gdmFsdWVzKQogICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjb250ZXh0KSkgewogICAgICAgIHNlbGZba2V5XSA9IGNvbnRleHRba2V5XTsKICAgICAgfQogICAgICBpZiAoIWlzUHlMb2FkZWQpIHsKICAgICAgICAvL2F3YWl0IGxvYWRQeW9kaWRlQW5kUGFja2FnZXMoaWQsIFtdKTsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlB5dGhvbiBpcyBub3QgbG9hZGVkIikKICAgICAgfQogICAgICBhd2FpdCBydW5TY3JpcHQocHl0aG9uLCBpZCk7CiAgICB9IGVsc2UgewogICAgICBhd2FpdCBsb2FkUHlvZGlkZUFuZFBhY2thZ2VzKGlkLCBjb250ZXh0LnB5b1BhY2thZ2VzLCBjb250ZXh0LnBhY2thZ2VzLCBjb250ZXh0LmluaXRDb2RlLCBjb250ZXh0LnRyYW5zZm9ybUNvZGUpOwogICAgICBlbmQoaWQpOwogICAgfQogIH07Cgp9KSgpOwoK",s=null,c=!1,I?g(i,s,c):function(e,n,t){var l;return function(g){return l=l||o(e,n,t),new Worker(l,g)}}(i,s,c));let C=Symbol("clean");let a=[],u=0,b=e=>{let n,t=[],l={lc:0,value:e,set(e){l.value=e,l.notify()},get:()=>(l.lc||l.listen((()=>{}))(),l.value),notify(e){n=t;let g=!a.length;for(let t=0;t<n.length;t++)a.push(n[t],l.value,e);if(g){u++;for(let e=0;e<a.length;e+=3)a[e](a[e+1],a[e+2]);a.length=0}},listen:e=>(t===n&&(t=t.slice()),l.lc=t.push(e),()=>{t===n&&(t=t.slice());let g=t.indexOf(e);~g&&(t.splice(g,1),l.lc--,l.lc||l.off())}),subscribe(e){let n=l.listen(e);return e(l.value),n},off(){}};return"production"!==process.env.NODE_ENV&&(l[C]=()=>{t=[],l.lc=0,l.off()}),l},d=(e={})=>{let n=b(e);return n.setKey=function(e,t){void 0===t?e in n.value&&(n.value={...n.value},delete n.value[e],n.notify(e)):n.value[e]!==t&&(n.value={...n.value,[e]:t},n.notify(e))},n},G=(e,n)=>{let t;Array.isArray(e)||(e=[e]);let l=[],g=()=>{let g=e.map((e=>e.get()));(t!==u||g.some(((e,n)=>e!==l[n])))&&(t=u,l=g,o.set(n(...g)))},o=b();var I,i,s,c,r,a;return i=()=>{let t=e.map((e=>e.listen(g,n)));return g(),()=>{for(let e of t)e()}},c=e=>{let n=i(e);n&&I.events[6].push(n)},r=5,a=e=>{let n=I.listen;I.listen=t=>(I.lc||I.active||(e(),I.active=!0),n(t));let t=I.off;if(I.events[6]=[],I.off=()=>{setTimeout((()=>{if(I.active&&!I.lc){I.active=!1;for(let e of I.events[6])e();I.events[6]=[],t()}}),1e3)},"production"!==process.env.NODE_ENV){let e=I[C];I[C]=()=>{for(let e of I.events[6])e();I.events[6]=[],I.active=!1,e()}}return()=>{I.listen=n,I.off=t}},(s=I=o).events=s.events||{},s.events[r+10]||(s.events[r+10]=a((e=>{s.events[r].reduceRight(((e,n)=>(n(e),e)),{shared:{},...e})}))),s.events[r]=s.events[r]||[],s.events[r].push(c),o};const B=d({id:"",stdOut:[],stdErr:[],exception:""}),p=d({stage:0,msg:""}),W=b(0),Z=b(0),v=G(W,(e=>1===e)),A=G(Z,(e=>1===e));return e.usePython=()=>{const e=new r;let t=e=>null;function l(e){e.startsWith("\n")&&e.replace("\n","");const n=e.split("\n"),t=new Array;return n.forEach((e=>{t.push("  "+e)})),t.join("\n")}function g(l,g,o={}){return n(this,void 0,void 0,(function*(){if(1===W.get())throw new Error("Only one python script can run at the time");W.set(1);const n=null!=g?g:(+new Date).toString();return B.set({id:n,stdOut:[],stdErr:[],exception:""}),new Promise((g=>{t=g,e.postMessage(Object.assign({id:n,python:l},o))}))}))}return e.onmessage=e=>{const n=e.data,{id:l}=n;!function(e,n){switch(n.type){case"end":t({results:n.res,error:null}),t=e=>null,W.set(0);break;case"err":t=e=>null,W.set(0),B.setKey("exception",n.msg);break;case"installlog":p.setKey("stage",n.msg.stage),p.setKey("msg",n.msg.msg);break;case"stderr":B.get().stdErr.push(n.msg),B.notify();break;case"stdout":B.get().stdOut.push(n.msg),B.notify();break;default:throw W.set(0),new Error(`Unknown event type ${n.type}`)}}(0,function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(l=Object.getOwnPropertySymbols(e);g<l.length;g++)n.indexOf(l[g])<0&&Object.prototype.propertyIsEnumerable.call(e,l[g])&&(t[l[g]]=e[l[g]])}return t}(n,["id"]))},{load:function(e=[],t=[],o="",I=""){return n(this,void 0,void 0,(function*(){let n;try{n=yield g("","_pyinstaller",{pyoPackages:e,packages:t,initCode:o,transformCode:l(I)})}catch(e){throw new Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`)}return Z.set(1),n}))},run:g,installLog:p,log:B,isExecuting:v,isReady:A}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
